<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta name="generator" content=""/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
    <link href="/static/css/haiersoft.css" rel="stylesheet" type="text/css" media="screen,print"/>
    <link href="/static/css/print.css" rel="stylesheet" type="text/css" media="print"/>
    <script src="/static/js/jquery-1.10.1.min.js"></script>
    <script src="/static/js/side.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->
</head>

<body>


<!-- MainForm -->
<div id="MainForm">
    <div class="form_boxA">
        <h2>班级信息列表</h2>
        <table cellpadding="0" cellspacing="0" id="title">
            <tr>
                <th>序号</th>
                <th>班级名称</th>
                <th>创建时间</th>
                <th>操作</th>
            </tr>
        </table>
        <p class="msg">共找到47条年度预算记录，当前显示从第1条至第10条</p>
    </div>

    <ul id="PageNum">
        <li><a href="#">首页</a></li>
        <li><a href="#">上一页</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
        <li><a href="#">6</a></li>
        <li><a href="#">下一页</a></li>
        <li><a href="#">尾页</a></li>
    </ul>

</div>
<script type="text/javascript">
    $(function () {
        $.getJSON('/api/grade/', function (result) {
            if (result.code == 200) {
                var html = '';
                for (var i = 0; i < result.grades.length; i++) {
                    html += '<tr> ' +
                        '<td>' + result.grades[i].g_id + '</td> ' +
                        '<td>' + result.grades[i].g_name + '</td> ' +
                        '<td>' + result.grades[i].create_time + '</td > ' +
                        '<td> <a href = "{{ url_for('.add_grade')}}?g_id=' +
                        result.grades[i].g_id + '"> 编辑 </a> | ' +
                        '<a href="javascript:void(0)" class="del" g_id="' + result.grades[i].g_id + '">删除</a> </td> ' +
                        '</tr>'
                }
                $('#title').append(html);
            }
            $('.del').on('click', function () {
                var g_id = $(this).attr('g_id');
                var a = $(this);
                $.ajax({
                    url: '/api/grade/',
                    data: {g_id: g_id},
                    type: 'delete',
                    success: function (result) {
                        if (result.code==200){
                            a.parent().parent().hide();
                            alert('删除成功~')
                        }
                    }
                })
            })
        });

    })
</script>
</body>
</html>